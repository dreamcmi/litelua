cmake_minimum_required(VERSION 3.6)

project(lua536)

AUX_SOURCE_DIRECTORY(src ALL_SRC)
INCLUDE_DIRECTORIES(inc)

# remove lua.c & luac.c
SET(LIB_SRC ${ALL_SRC})
LIST(REMOVE_ITEM LIB_SRC lua.c luac.c)

# lib
ADD_LIBRARY(lua STATIC ${LIB_SRC})

# lua
ADD_EXECUTABLE(luaexec src/lua.c)
target_link_libraries(luaexec lua)
set_target_properties(luaexec PROPERTIES OUTPUT_NAME lua)

# luac
add_executable(luac src/luac.c)
target_link_libraries(luac lua)